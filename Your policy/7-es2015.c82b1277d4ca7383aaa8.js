(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1hA4":function(e,i,t){"use strict";t.d(i,"a",function(){return b});var s=t("eIep"),r=t("lJxs"),o=t("nYR2"),n=t("fXoL"),a=t("K3ix"),l=t("tyNb"),c=t("WlVc"),d=t("m1ZC"),p=t("Ns8M"),u=t("h7a8");let b=(()=>{class e{constructor(e,i,t,s,r,o){this.modalRef=e,this.router=i,this.loadingOverlay=t,this.claimsService=s,this.currentWorkflowService=r,this.getInTouchNavigatorService=o}ngOnInit(){}closePopup(){this.modalRef.hide()}cancelClaim(){this.loadingOverlay.show(),this.claimsService.cancelClaim().pipe(Object(s.a)(e=>this.currentWorkflowService.getWorkflowSummary$().pipe(Object(r.a)(()=>e))),Object(o.a)(()=>{this.loadingOverlay.close(),this.modalRef.hide()})).subscribe(e=>{e&&e.isSuccess&&(e.data.hasSucceeded?this.router.navigate(["/customer/claimsenol"],{replaceUrl:!0}).finally(()=>{this.modalRef.hide(),this.loadingOverlay.close()}):e.data.error&&this.getInTouchNavigatorService.navigate({type:e.data.error,subtype:null,shouldDeleteWorkflow:!1,raiseEvent:!0}))})}}return e.\u0275fac=function(i){return new(i||e)(n.Rb(a.a),n.Rb(l.g),n.Rb(c.a),n.Rb(d.a),n.Rb(p.a),n.Rb(u.a))},e.\u0275cmp=n.Lb({type:e,selectors:[["app-cancel-claim-popup"]],decls:14,vars:0,consts:[[1,"modal-header","heading-small","pt-4","px-4","pb-0","border-0"],[1,"heading-beta","my-0"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","p-4"],[1,"mb-3"],[1,"d-flex","flex-column","flex-md-row","mt-4","justify-content-md-start"],["type","button",1,"btn","btn-primary","btn-icon","mb-3","mb-md-0","mr-0","mr-md-3",3,"click"],["type","submit",1,"btn","btn-primary","cancel-claim",3,"click"]],template:function(e,i){1&e&&(n.Xb(0,"div",0),n.Xb(1,"h1",1),n.Lc(2," Are you sure you want to cancel making your claim online today? "),n.Wb(),n.Xb(3,"button",2),n.fc("click",function(){return i.closePopup()}),n.Xb(4,"span",3),n.Lc(5,"\xd7"),n.Wb(),n.Wb(),n.Wb(),n.Xb(6,"div",4),n.Xb(7,"p",5),n.Lc(8," By doing so, all the information that you've entered will no longer be saved should you want to make a claim at a later date for this incident. "),n.Wb(),n.Xb(9,"div",6),n.Xb(10,"button",7),n.fc("click",function(){return i.closePopup()}),n.Lc(11," No "),n.Wb(),n.Xb(12,"button",8),n.fc("click",function(){return i.cancelClaim()}),n.Lc(13," Yes, cancel my claim "),n.Wb(),n.Wb(),n.Wb())},styles:[".btn.cancel-claim[_ngcontent-%COMP%]{white-space:nowrap}"]}),e})()},"9Vyb":function(e,i,t){"use strict";t.d(i,"b",function(){return s}),t.d(i,"a",function(){return r});var s=function(e){return e[e.InProgress=0]="InProgress",e[e.Processing=1]="Processing",e[e.Succeeded=2]="Succeeded",e[e.Failed=3]="Failed",e}({}),r=function(e){return e[e.Unknown=0]="Unknown",e[e.ENOL=1]="ENOL",e[e.ClaimSummary=2]="ClaimSummary",e}({})},kjr3:function(e,i,t){"use strict";t.d(i,"a",function(){return L});var s=t("fXoL"),r=t("3Pt+"),o=t("rZBt"),n=t("VIHj"),a=t("9Vyb"),l=t("7pIB"),c=t("XNiG"),d=t("nYR2"),p=t("TGKs"),u=t("WlVc"),b=t("ofXK"),m=t("yyhP"),f=t("tXNG"),h=t("Lrpa");function g(e,i){if(1&e&&(s.Xb(0,"option",34),s.Lc(1),s.Wb()),2&e){const e=i.$implicit;s.pc("value",e),s.Ab(1),s.Mc(e)}}function y(e,i){if(1&e&&(s.Xb(0,"span"),s.Lc(1),s.Wb()),2&e){const e=s.ic().$implicit;s.Ab(1),s.Nc("",e.progress,"%")}}function v(e,i){1&e&&(s.Xb(0,"span"),s.Lc(1,"Processing file..."),s.Wb())}function S(e,i){1&e&&(s.Xb(0,"span"),s.Lc(1,"Uploaded successfully"),s.Wb())}function F(e,i){1&e&&(s.Xb(0,"span"),s.Lc(1,"Maximum number of uploaded files reached"),s.Wb())}function w(e,i){1&e&&(s.Xb(0,"span"),s.Lc(1,"Upload error - please try again"),s.Wb())}function x(e,i){if(1&e&&(s.Xb(0,"span"),s.Vb(1,35),s.Jc(2,F,2,0,"span",29),s.Jc(3,w,2,0,"span",36),s.Ub(),s.Wb()),2&e){const e=s.ic().$implicit,i=s.ic();s.Ab(1),s.pc("ngSwitch",i.getErrorMessage(e)),s.Ab(1),s.pc("ngSwitchCase","MaximumFiles")}}function W(e,i){if(1&e){const e=s.Yb();s.Xb(0,"div",15),s.Xb(1,"div",16),s.Sb(2,"div",17),s.Xb(3,"div",18),s.Xb(4,"span",19),s.Lc(5),s.jc(6,"withoutExtension"),s.Wb(),s.Wb(),s.Wb(),s.Xb(7,"div",20),s.Xb(8,"div",21),s.Sb(9,"div",22),s.Wb(),s.Xb(10,"div",23),s.Xb(11,"select",24),s.Xb(12,"option",25),s.Lc(13,"Please select..."),s.Wb(),s.Jc(14,g,2,2,"option",26),s.Wb(),s.Sb(15,"progressbar",27),s.Xb(16,"div",28),s.Jc(17,y,2,1,"span",29),s.Jc(18,v,2,0,"span",29),s.Jc(19,S,2,0,"span",29),s.Jc(20,x,4,2,"span",29),s.Wb(),s.Wb(),s.Xb(21,"div",30),s.Xb(22,"button",31),s.fc("click",function(){s.Ec(e);const t=i.$implicit,r=i.index;return s.ic().removeFile(t,r)}),s.Lc(23," Remove "),s.Wb(),s.Wb(),s.Wb(),s.Xb(24,"div",16),s.Sb(25,"div",17),s.Xb(26,"div",32),s.Sb(27,"app-validation-message",33),s.Wb(),s.Wb(),s.Wb()}if(2&e){const e=i.$implicit,t=i.index,r=s.ic();s.pc("formGroup",r.getFileGroup(t)),s.Ab(5),s.Mc(s.kc(6,14,e.file.name)),s.Ab(6),s.Bb("disabled",r.disableModifications(e)?"":null),s.Ab(3),s.pc("ngForOf",r.documentDescriptions),s.Ab(1),s.pc("animate",!0)("value",e.isError?100:e.progress)("type",r.getProgressBarType(e)),s.Ab(1),s.pc("ngSwitch",r.getFileStatus(e)),s.Ab(1),s.pc("ngSwitchCase",r.FileStatus.InProgress),s.Ab(1),s.pc("ngSwitchCase",r.FileStatus.Processing),s.Ab(1),s.pc("ngSwitchCase",r.FileStatus.Succeeded),s.Ab(1),s.pc("ngSwitchCase",r.FileStatus.Failed),s.Ab(2),s.pc("disabled",r.disableModifications(e)),s.Ab(5),s.pc("control",r.getFileGroup(t).get("fileDescription"))}}function O(e,i){if(1&e&&(s.Xb(0,"span"),s.Lc(1),s.Wb()),2&e){const e=i.$implicit;s.Ab(1),s.Nc(" ",e," ")}}function A(e,i){if(1&e){const e=s.Yb();s.Xb(0,"div",37),s.Xb(1,"button",38),s.fc("click",function(){return s.Ec(e),s.ic().clearAll()}),s.Lc(2," Cancel "),s.Wb(),s.Xb(3,"button",39),s.fc("click",function(){return s.Ec(e),s.ic().uploadAll()}),s.Lc(4,"Upload all "),s.Sb(5,"span",40),s.Wb(),s.Wb()}if(2&e){const e=s.ic();s.Ab(3),s.pc("disabled",e.numberOfUploadedFilesReached)}}function X(e,i){if(1&e&&(s.Xb(0,"div",41),s.Xb(1,"div",42),s.Lc(2),s.Wb(),s.Wb()),2&e){const e=s.ic();s.Ab(2),s.Nc(" ",e.uploadErrorMessage," ")}}const M=function(e){return{"nv-file-over":e}};let L=(()=>{class e{constructor(e,i,t,r){this.formBuilder=e,this.formService=i,this.evidenceDocumentService=t,this.loadingOverlay=r,this.uploaderName="files",this.FileStatus=a.b,this.showUploadError=!1,this.numberOfUploadedFilesReached=!1,this.errorMessages=[],this.hasBaseDropZoneOver=!1,this.fileUploaded=new s.n,this.bufferFactor=.3,this.destroy$=new c.a,this.mb=1024,this.filterFileType={fn:(e,i)=>{const t=e.name.lastIndexOf("."),s=e.name.substring(t);return null!=this.allowedFileTypes.find(e=>null!=s&&e.toLowerCase()===s.toLowerCase())},name:"filenameType"},this.fileUploaderOptions={isHTML5:!0,allowedMimeType:this.allowedMimeTypes,filters:[this.filterFileType],autoUpload:!1,disableMultipart:!1,method:"POST",queueLimit:this.maximumNumberOfFiles+Math.ceil(this.maximumNumberOfFiles*this.bufferFactor),headers:[],maxFileSize:this.maxFileSizeInMegaBytes*this.mb*this.mb,parametersBeforeFiles:!0}}get allowedFileTypes(){return o.a.settings.uploadingFiles.supportedFileTypes}get maximumNumberOfFiles(){return o.a.settings.uploadingFiles.maximumNumberOfFiles}get maxFileSizeInMegaBytes(){return o.a.settings.uploadingFiles.maxFileSizeInMegaBytes}get allowedMimeTypes(){return o.a.settings.uploadingFiles.supportedFileMediaTypes}get files(){return this.uploader.queue}ngOnInit(){this.uploaderSettings.pathToApi&&(this.fileUploaderOptions.url=this.uploaderSettings.pathToApi),this.uploaderSettings.additionalParameter&&(this.fileUploaderOptions.additionalParameter=this.uploaderSettings.additionalParameter),this.uploader=new l.d(this.fileUploaderOptions),this.initForm(),this.fetchData(),this.configureUploader()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}clearAll(){for(;0!==this.descriptionsArray.length;)this.descriptionsArray.removeAt(0);this.uploader.clearQueue(),this.modalRef.hide()}uploadAll(){this.formService.validateForm(this.form,!0)&&this.uploader.uploadAll()}fileOverBase(e){console.log(e)}removeFile(e,i){this.descriptionsArray.removeAt(i),e.remove()}getProgressBarType(e){switch(this.getFileStatus(e)){case a.b.Processing:case a.b.InProgress:default:return"";case a.b.Failed:return"danger";case a.b.Succeeded:return"success"}}getFileStatus(e){if(e.isUploading&&100!==e.progress)return a.b.InProgress;if(e.isUploaded){if(e.isError)return a.b.Failed;if(e.isSuccess)return a.b.Succeeded}return 100!==e.progress||e.isSuccess?void 0:a.b.Processing}disableModifications(e){return e.isUploaded&&e.isSuccess||e.isUploading}getFileGroup(e){return this.descriptionsArray.at(e)}getErrorMessage(e){const i=this.errorMessages.find(i=>i.key===e);return i?i.value:null}initForm(){this.descriptionsArray=this.formBuilder.array([]),this.form=this.formBuilder.group({descriptionsArray:this.descriptionsArray})}fetchData(){this.loadingOverlay.show(),this.evidenceDocumentService.getDocumentTypes$().pipe(Object(d.a)(()=>this.loadingOverlay.close())).subscribe(e=>{e.isSuccess?this.documentDescriptions=e.data.descriptions:this.modalRef.hide()})}configureUploader(){this.uploader.onBuildItemForm=(e,i)=>{const t=this.getFileDescription(e);i.append("description",t)},this.uploader.onAfterAddingFile=e=>{this.showUploadError=!1,this.descriptionsArray.push(this.createDescriptionForm(e))},this.uploader.onSuccessItem=(e,i)=>{const t=JSON.parse(i);if(!t.isSuccess)return e.isError=!0,void(e.isSuccess=!1);this.fileUploaded.emit({id:t.data,name:e.file.name,description:this.getFileDescription(e)}),this.files.every(e=>e.isUploaded&&e.isSuccess)&&this.clearAll()},this.uploader.onCompleteItem=(e,i)=>{if(!i)return;const t=JSON.parse(i);t.isSuccess||t.validationResult.isValid||t.validationResult.errorMessages.length>0&&(this.uploadErrorMessage=t.validationResult.errorMessages[0].value,this.showUploadError=!0,t.validationResult.errorMessages.findIndex(e=>"MaximumFiles"===e.key)>=0&&(this.errorMessages.push({key:e,value:"MaximumFiles"}),this.numberOfUploadedFilesReached=!0))},this.uploader.onWhenAddingFileFailed=(e,i)=>{switch(i.name){case"mimeType":this.uploadErrorMessage="Oops it seems the file you chose has an invalid file extension.";break;case"fileSize":this.uploadErrorMessage="Oops it seems the file you chose is too big.";break;case"queueLimit":this.uploadErrorMessage="Number of files in queue has been reached. Please clear the queue to upload more files."}this.uploadErrorMessage&&(this.showUploadError=!0)}}getFileDescription(e){return this.descriptionsArray.controls.find(i=>i.get("file").value===e).get("fileDescription").value}createDescriptionForm(e){return this.formBuilder.group({file:e,fileDescription:["",r.B.required]})}}return e.\u0275fac=function(i){return new(i||e)(s.Rb(r.e),s.Rb(n.a),s.Rb(p.a),s.Rb(u.a))},e.\u0275cmp=s.Lb({type:e,selectors:[["app-file-uploader"]],inputs:{modalRef:"modalRef",uploaderSettings:"uploaderSettings"},outputs:{fileUploaded:"fileUploaded"},features:[s.zb([n.a])],decls:27,vars:16,consts:[[3,"formGroup","ngSubmit"],["class","bg-gray px-2 px-md-0 py-2 mb-1",3,"formGroup",4,"ngFor","ngForOf"],[1,"d-flex","flex-wrap","justify-content-center"],["ng2FileDrop","",1,"w-100","px-2","px-md-3","py-3","py-md-5","m-2","m-md-3","uploader-drop-zone",3,"uploader","ngClass","fileOver"],[1,"heading-epsilon","text-center","w-100"],[1,"text-center","small-print","text-faded","w-100"],[1,"btn","btn-primary",3,"for"],["ng2FileSelect","","type","file","hidden","","multiple","",3,"accept","uploader","id","name"],[1,"pt-3","px-md-3","small-print"],[1,"text-faded"],[4,"ngFor","ngForOf"],[1,"py-3","p-md-3","small-print"],["href","mailto:policyholderclaims@1stcentral.co.uk"],["class","px-md-3 d-flex justify-content-between",4,"ngIf"],["class","col-12 px-md-3 mt-4",4,"ngIf"],[1,"bg-gray","px-2","px-md-0","py-2","mb-1",3,"formGroup"],[1,"row"],[1,"col","col-2","d-none","d-md-block"],[1,"col-12","col-md-7"],[1,"text-small"],[1,"row","align-items-center"],[1,"col","col-2","d-none","d-md-flex","align-items-end","justify-content-center","pb-2"],[1,"icon","icon-roundel","icon-documents"],[1,"col-12","col-md-7","py-1","px-md-0"],["formControlName","fileDescription",1,"form-control"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[1,"my-1","font-weight-bold",3,"animate","value","type"],[1,"text-small","mt-1",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"col-12","col-md-3","pl-3","pr-0","d-flex","align-items-end","pb-1"],["type","button",1,"btn","btn-link","py-2",3,"disabled","click"],[1,"col-12","pl-md-0","col-md-9"],["requiredMessage","Please provide a description for the evidence you are uploading",3,"control"],[3,"value"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[1,"px-md-3","d-flex","justify-content-between"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-icon","btn-icon-highlight",3,"disabled","click"],[1,"icon","icon-functional","icon-arrow"],[1,"col-12","px-md-3","mt-4"],[1,"alert","alert-danger"]],template:function(e,i){1&e&&(s.Xb(0,"form",0),s.fc("ngSubmit",function(){return i.uploadAll()}),s.Jc(1,W,28,16,"div",1),s.Xb(2,"div",2),s.Xb(3,"div",3),s.fc("fileOver",function(e){return i.fileOverBase(e)}),s.Xb(4,"div",4),s.Lc(5," Drag and drop files here to upload "),s.Wb(),s.Wb(),s.Xb(6,"p",5),s.Lc(7,"Or if you prefer"),s.Wb(),s.Xb(8,"div"),s.Xb(9,"label",6),s.Lc(10,"Choose files"),s.Wb(),s.Sb(11,"input",7),s.Wb(),s.Wb(),s.Xb(12,"div",8),s.Xb(13,"div",9),s.Lc(14,"Accepted file types - "),s.Jc(15,O,2,1,"span",10),s.Wb(),s.Xb(16,"div",9),s.Lc(17),s.Wb(),s.Xb(18,"div",9),s.Lc(19),s.Wb(),s.Wb(),s.Xb(20,"div",11),s.Lc(21," If you upload something by accident, please send an email to "),s.Xb(22,"a",12),s.Lc(23,"policyholderclaims@1stcentral.co.uk"),s.Wb(),s.Lc(24,", quoting your claim number and we'll remove it for you. "),s.Wb(),s.Jc(25,A,6,1,"div",13),s.Jc(26,X,3,1,"div",14),s.Wb()),2&e&&(s.pc("formGroup",i.form),s.Ab(1),s.pc("ngForOf",i.files),s.Ab(2),s.pc("uploader",i.uploader)("ngClass",s.uc(14,M,i.hasBaseDropZoneOver)),s.Ab(6),s.qc("for",i.uploaderName),s.Ab(2),s.qc("id",i.uploaderName),s.qc("name",i.uploaderName),s.pc("accept",i.allowedFileTypes)("uploader",i.uploader),s.Ab(4),s.pc("ngForOf",i.allowedFileTypes),s.Ab(2),s.Nc("Maximum file size is ",i.maxFileSizeInMegaBytes," MB "),s.Ab(2),s.Nc("Maximum number of files is ",i.maximumNumberOfFiles,""),s.Ab(6),s.pc("ngIf",i.files.length),s.Ab(1),s.pc("ngIf",i.showUploadError))},directives:[r.C,r.s,r.j,b.o,l.a,b.n,l.b,b.p,r.A,r.r,r.h,r.v,r.D,m.a,b.r,b.s,f.a,b.t],pipes:[h.a],styles:[".uploader-drop-zone[_ngcontent-%COMP%]{border:2px dashed #333;border-radius:10px}.small-print[_ngcontent-%COMP%]{font-size:.8rem}.text-small[_ngcontent-%COMP%]{font-size:.7rem}.text-faded[_ngcontent-%COMP%]{opacity:.85}.icon-documents[_ngcontent-%COMP%]{width:2rem;height:2rem}.progress[_ngcontent-%COMP%]{height:4px}@media (min-width:768px){.modal-dialog[_ngcontent-%COMP%]{max-width:calc(100% - 76px)}}"]}),e})()}}]);