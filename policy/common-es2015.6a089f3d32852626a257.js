(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1+yS":function(e,t,s){"use strict";s.d(t,"a",function(){return i});class i{constructor(){this.oneHourMinutes=60,this.futureDateByStep=15,this.oneDayHours=24,this.todayDate=new Date}get hours(){const e=[];for(let t=0;t<this.oneDayHours;t++)e.push(t.toString().padStart(2,"0"));return e}get minutes(){const e=[];for(let t=0;t<this.oneHourMinutes;t+=this.futureDateByStep)e.push(t.toString().padStart(2,"0"));return e}setTime(e,t,s,i){let r=e,a=this.getAdjustedMinutes(t);a===this.oneHourMinutes&&(a=0,r=(s.getHours()+1)%this.oneDayHours,0===r&&(s.setDate(s.getDate()+1),i.get("date").setValue(s),this.todayDate.setDate(this.todayDate.getDate()+1))),i.get("hours").setValue(r.toString().padStart(2,"0")),i.get("minutes").setValue(a.toString().padStart(2,"0"))}getSelectedDateTime(e){const t=e.get("date").value;if(!t)return;const s=e.get("hours").value,i=e.get("minutes").value;return new Date(t.getFullYear(),t.getMonth(),t.getDate(),parseInt(s,10),parseInt(i,10),0)}getAdjustedMinutes(e){return Math.ceil(e/this.futureDateByStep)*this.futureDateByStep}}},"4X5M":function(e,t,s){"use strict";s.d(t,"a",function(){return a});var i=s("XNiG"),r=s("jtHE");class a{constructor(){this.breadcrumbEventSource$=new i.a,this.setBreadcrumbsSource$=new r.a(1),this.breadcrumbEvent$=this.breadcrumbEventSource$.asObservable(),this.setBreadcrumbs$=this.setBreadcrumbsSource$.asObservable()}breadcrumbEvent(e){this.breadcrumbEventSource$.next(e)}setBreadcrumbs(e){this.setBreadcrumbsSource$.next(e)}redirectToTheLastAllowedStep(e,t,s,i){e.breadcrumbs=e.breadcrumbs.sort((e,t)=>e.step.valueOf()-t.step.valueOf());const r=this.getStepByUrl(t.url.toString(),e),a=e.breadcrumbs.slice().reverse().find(e=>e.completed);if(!r||!r.completed&&e.breadcrumbs.indexOf(r)!==e.breadcrumbs.indexOf(a)+1){const t=e.breadcrumbs[e.breadcrumbs.indexOf(a)+1];s.navigateByUrl(this.getUrlByStep(t.step,i))}}}},"4vUC":function(e,t,s){"use strict";var i=s("UX6N");s.d(t,"a",function(){return i.a});var r=s("y5FX");s.d(t,"b",function(){return r.a});var a=s("2Noi");s.d(t,"c",function(){return a.a})},"62Kl":function(e,t,s){"use strict";s.d(t,"a",function(){return o});var i=s("4X5M"),r=s("wZkI"),a=s("fXoL"),n=s("tyNb");let o=(()=>{class e extends i.a{constructor(e){super(),this.router=e,this.noQuoteUrl="/adjustment/results/noquote",this.adjustmentChangesUrl="/adjustment/home/adjustmentchanges",this.changeDetailsUrl="/adjustment/home/changedetails",this.quoteUrl="/adjustment/result/quote",this.changeExtrasUrl="/adjustment/home/ancillariesonlychanges",this.beginQuotePaymentUrl="/adjustment/payment/begin",this.quotePaymentFailedUrl="/adjustment/hostedpayment/paymentfailed",this.quotePaymentUnsuccessfulUrl="/adjustment/payment/paymentunsuccessful",this.cardDetailsUrl="/adjustment/payment/carddetails",this.paymentPlanDetailsUrl="/adjustment/payment/paymentplandetails"}getStepByUrl(e,t){return e.includes(this.adjustmentChangesUrl)?t.breadcrumbs.find(e=>e.step===r.a.Select):e.includes(this.changeDetailsUrl)?t.breadcrumbs.find(e=>e.step===r.a.Change):e.includes(this.changeExtrasUrl)?t.breadcrumbs.find(e=>e.step===r.a.Extras):e.includes(this.quoteUrl)||e.includes(this.noQuoteUrl)?t.breadcrumbs.find(e=>e.step===r.a.Quote):e.includes(this.beginQuotePaymentUrl)||e.includes(this.quotePaymentFailedUrl)||e.includes(this.cardDetailsUrl)||e.includes(this.paymentPlanDetailsUrl)||e.includes(this.quotePaymentUnsuccessfulUrl)?t.breadcrumbs.find(e=>e.step===r.a.Payment):void 0}getUrlByStep(e,t){let s;switch(e){case r.a.Select:s=this.router.createUrlTree([this.adjustmentChangesUrl],{queryParams:{policyId:t[0]}}).toString();break;case r.a.Change:s=this.router.createUrlTree([this.changeDetailsUrl],{queryParams:{policyId:t[0]}}).toString();break;case r.a.Extras:s=this.router.createUrlTree([this.changeExtrasUrl],{queryParams:{policyId:t[0]}}).toString();break;case r.a.Quote:s=this.router.createUrlTree([this.quoteUrl],{queryParams:{policyId:t[0]}}).toString();break;case r.a.Payment:s=this.router.createUrlTree([this.beginQuotePaymentUrl],{queryParams:{policyId:t[0]}}).toString()}return s}}return e.\u0275fac=function(t){return new(t||e)(a.bc(n.g))},e.\u0275prov=a.Nb({token:e,factory:e.\u0275fac}),e})()},"6d4d":function(e,t,s){"use strict";s.d(t,"a",function(){return c});var i=s("tk/3"),r=s("lJxs"),a=s("JIr8"),n=s("06WG"),o=s("ROHl"),l=s("fXoL");let c=(()=>{class e extends o.a{constructor(e){super(e),this.httpClient=e,this.updateIsOtherPartyKnownUrl="enol/thirdParties/updateIsOtherPartyKnown",this.getIsOtherPartyKnownUrl="enol/thirdParties/getIsOtherPartyKnown",this.getThirdPartyVehiclesInvolvedUrl="enol/thirdParties/getThirdPartyVehiclesInvolved",this.updateThirdPartyVehiclesInvolvedUrl="enol/thirdParties/updateThirdPartyVehiclesInvolved",this.updateThirdPartyBicycleInvolvedUrl="enol/thirdParties/updateThirdPartyBicycleInvolved",this.updateThirdPartyHeavyPlantInvolvedUrl="enol/thirdParties/updateThirdPartyHeavyPlantInvolved",this.updateThirdPartyPedestrianInvolvedUrl="enol/thirdParties/updateThirdPartyPedestrianInvolved",this.getThirdPartiesDetailsUrl="enol/thirdParties/getThirdPartiesDetails",this.updateThirdPartyAnimalInvolvedUrl="enol/thirdParties/updateThirdPartyAnimalsDetailsInvolved",this.deleteThirdPartyUrl="enol/thirdParties/deleteThirdParty",this.updateThirdPartyStreetFurnitureInvolvedUrl="enol/thirdParties/updateThirdPartyStreetFurnitureInvolved",this.getThirdPartyWitnessesInvolvedUrl="enol/thirdParties/getThirdPartyWitnessesInvolved",this.updateThirdPartyWitnessesInvolvedUrl="enol/thirdParties/updateThirdPartyWitnessesInvolved",this.getWitnessesUrl="enol/thirdParties/getWitnesses",this.updateWitnessUrl="enol/thirdParties/updateWitness",this.removeWitnessUrl="enol/thirdParties/removeWitness",this.updateThirdPartyPropertyInvolvedUrl="enol/thirdParties/updateThirdPartyPropertyInvolved",this.getFireCauseDamageUrl="enol/thirdParties/getFireCauseDamage",this.saveFireCauseDamageUrl="enol/thirdParties/saveFireCauseDamage",this.getFootageAndEvidenceUrl="enol/thirdParties/getFootageAndEvidence",this.saveFootageAndEvidenceUrl="enol/thirdParties/saveFootageAndEvidence",this.getContactsUrl="enol/thirdParties/getContacts",this.getPartiesNumberUrl="enol/incidentDetails/getPartiesNumber"}getIsOtherPartyKnown$(){return this.get(this.getIsOtherPartyKnownUrl,null).pipe(Object(r.a)(e=>e.isSuccess&&e.data,Object(a.a)(n.a.handleJsonResultError())))}updateIsOtherPartyKnown$(e){return this.post(this.updateIsOtherPartyKnownUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}getThirdPartyVehicleInvolved$(e){const t=(new i.e).set("guid",e);return this.get(this.getThirdPartyVehiclesInvolvedUrl,null,t).pipe(Object(r.a)(e=>e.isSuccess&&e.data,Object(a.a)(n.a.handleJsonResultError())))}updateThirdPartyVehicleInvolved$(e){return this.post(this.updateThirdPartyVehiclesInvolvedUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}updateThirdPartyBicycleInvolved$(e){return this.post(this.updateThirdPartyBicycleInvolvedUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}updateThirdPartyHeavyPlantInvolved$(e){return this.post(this.updateThirdPartyHeavyPlantInvolvedUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}updateThirdPartyPedestrianInvolved$(e){return this.post(this.updateThirdPartyPedestrianInvolvedUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}getThirdPartiesDetails$(){return this.get(this.getThirdPartiesDetailsUrl).pipe(Object(a.a)(n.a.handleJsonResultError()))}updateThirdPartyAnimalInvolved$(e){return this.post(this.updateThirdPartyAnimalInvolvedUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}updateThirdPartyStreetFurnitureInvolved$(e){return this.post(this.updateThirdPartyStreetFurnitureInvolvedUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}getThirdPartyWitnessesInvolved$(){return this.get(this.getThirdPartyWitnessesInvolvedUrl).pipe(Object(r.a)(e=>e.isSuccess&&e.data,Object(a.a)(n.a.handleJsonResultError())))}updateThirdPartyWitnessesInvolved$(e){return this.post(this.updateThirdPartyWitnessesInvolvedUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}getWitnesses$(){return this.get(this.getWitnessesUrl,null).pipe(Object(r.a)(e=>e.isSuccess&&e.data,Object(a.a)(n.a.handleJsonResultError())))}updateWitness$(e){return this.post(this.updateWitnessUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}updateThirdPartyPropertyInvolved$(e){return this.post(this.updateThirdPartyPropertyInvolvedUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}removeWitness$(e){return this.put(this.removeWitnessUrl,JSON.stringify(e)).pipe(Object(a.a)(n.a.handleJsonResultError()))}deleteThirdParty$(e){const t=(new i.e).set("id",e);return this.post(this.deleteThirdPartyUrl,null,null,t).pipe(Object(a.a)(n.a.handleJsonResultError()))}getFireCauseDamage$(){return this.get(this.getFireCauseDamageUrl).pipe(Object(r.a)(e=>{if(e.isSuccess)return e.data},Object(a.a)(n.a.handleJsonResultError())))}saveFireCauseDamage$(e){return this.post(this.saveFireCauseDamageUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}getFootageAndEvidence$(){return this.get(this.getFootageAndEvidenceUrl).pipe(Object(r.a)(e=>{if(e.isSuccess)return e.data},Object(a.a)(n.a.handleJsonResultError())))}saveFootageAndEvidence$(e){return this.post(this.saveFootageAndEvidenceUrl,e).pipe(Object(a.a)(n.a.handleJsonResultError()))}getContacts$(){return this.get(this.getContactsUrl,null).pipe(Object(r.a)(e=>e.isSuccess&&e.data,Object(a.a)(n.a.handleJsonResultError())))}getPartiesNumber$(){return this.get(this.getPartiesNumberUrl).pipe(Object(r.a)(e=>{if(e.isSuccess)return e.data},Object(a.a)(n.a.handleJsonResultError())))}}return e.\u0275fac=function(t){return new(t||e)(l.bc(i.b))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac}),e})()},"8GIJ":function(e,t,s){"use strict";s.d(t,"a",function(){return i});var i=function(e){return e[e.NewBusiness=1]="NewBusiness",e[e.Adjustment=2]="Adjustment",e[e.Cancellation=4]="Cancellation",e[e.Renewal=6]="Renewal",e}({})},Aize:function(e,t,s){"use strict";s.d(t,"a",function(){return n});var i=s("tyNb"),r=s("XNiG"),a=s("fXoL");s("4X5M");let n=(()=>{class e{constructor(e,t,s,i=!0){this.breadcrumbService=e,this.router=t,this.route=s,this.trimCompletedStatuses=i,this.destroyed$=new r.a}get isBreadcrumbStep(){return!!this.breadcrumbService.getStepByUrl(this.router.url,this.model)}ngOnInit(){this.breadcrumbService.setBreadcrumbs$.subscribe(e=>{this.model=e}),this.router.events.subscribe(e=>{e instanceof i.d&&this.trimCompletedStatuses&&this.changeCompletedStatuses()}),this.trimCompletedStatuses&&this.changeCompletedStatuses()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}onClick(e){this.breadcrumbService.breadcrumbEvent({url:this.breadcrumbService.getUrlByStep(e,[this.route.snapshot.queryParams.policyId]),step:e})}changeCompletedStatuses(){var e;(null===(e=this.model)||void 0===e?void 0:e.breadcrumbs)&&this.model.breadcrumbs.forEach((e,t)=>{e.completed=t<this.model.breadcrumbs.indexOf(this.breadcrumbService.getStepByUrl(this.router.url,this.model))})}}return e.\u0275fac=function(e){a.ec()},e.\u0275dir=a.Mb({type:e}),e})()},CqBB:function(e,t,s){"use strict";s.d(t,"a",function(){return u});var i=s("k5Aa"),r=s("Mps5"),a=s("fHT1"),n=s("wY0m"),o=s("fXoL"),l=s("ofXK");function c(e,t){if(1&e&&(o.Xb(0,"span"),o.Sb(1,"span",1),o.Lc(2),o.Wb()),2&e){const e=o.ic();o.Gb("badge badge-status badge-status-",e.statusColor,""),o.Ab(2),o.Nc(" ",e.statusName,"\n")}}let u=(()=>{class e{constructor(){this.isVisible=!0}ngOnChanges(){this.status?this.handleStatus(this.status):this.temporaryDriverStatus>=r.a.Active?this.handleTemporaryDriverStatus(this.temporaryDriverStatus):this.temporaryCoverStatus>=a.a.Active?this.handleTemporaryCoverStatus(this.temporaryCoverStatus):this.claimStatus>=n.a.Unknown?this.handleClaimStatus(this.claimStatus):this.isVisible=!1}handleTemporaryDriverStatus(e){switch(e){case r.a.Active:this.statusName="Active",this.statusColor="success";break;case r.a.Inactive:this.statusName="Inactive",this.statusColor="danger";break;case r.a.PendingQuote:this.statusName="Pending quote",this.statusColor="warning";break;case r.a.StartingSoon:this.statusName="Starting soon",this.statusColor="warning";break;default:this.isVisible=!1}}handleTemporaryCoverStatus(e){switch(e){case a.a.Active:this.statusName="Active",this.statusColor="success";break;case a.a.Inactive:this.statusName="Inactive",this.statusColor="danger";break;case a.a.StartingSoon:this.statusName="Starting soon",this.statusColor="warning";break;default:this.isVisible=!1}}handleClaimStatus(e){switch(e){case n.a.Open:case n.a.Reopened:case n.a.AwaitingConfirmation:case n.a.FNOL:this.statusName="Open",this.statusColor="success";break;case n.a.Closed:this.statusName="Closed",this.statusColor="danger";break;case n.a.Unknown:this.statusName="Draft",this.statusColor="warning";break;default:this.isVisible=!1}}handleStatus(e){switch(e){case"Collected":this.statusName="Collected",this.statusColor="success";break;case i.j.Live:case i.j.Renewal:case i.j.Renewed:this.statusName="Active Policy",this.statusColor="success";break;case i.j.StartingSoon:this.statusName="Starting Soon",this.statusColor="warning";break;case i.j.Cancelled:case i.j.Expired:case i.j.Lapsed:case i.j.NTU:this.statusName="Inactive Policy",this.statusColor="danger";break;case i.j.PendingCancellation:this.statusName="Pending Cancellation",this.statusColor="danger";break;case i.j.Void:this.statusName="Policy Void",this.statusColor="danger";break;case i.j.Suspended:default:this.isVisible=!1}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Lb({type:e,selectors:[["app-status-badge"]],inputs:{status:"status",temporaryDriverStatus:"temporaryDriverStatus",temporaryCoverStatus:"temporaryCoverStatus",claimStatus:"claimStatus"},features:[o.yb],decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"icon","icon-functional"]],template:function(e,t){1&e&&o.Jc(0,c,3,4,"span",0),2&e&&o.pc("ngIf",t.isVisible)},directives:[l.p],styles:[".badge[_ngcontent-%COMP%]{font-weight:400}@media (max-width:768px){.badge[_ngcontent-%COMP%]{white-space:normal;text-align:left}}"]}),e})()},DJNu:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("fXoL");let r=(()=>{class e{transform(e,t=[]){if(!e)return!1;if(0===t.length)return Object.values(e).some(e=>e);for(const s of t)if(e[s])return!0;return!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Qb({name:"isFilled",type:e,pure:!0}),e})()},JNCh:function(e,t,s){"use strict";s.d(t,"a",function(){return h});var i=s("ROHl"),r=s("tk/3"),a=s("lJxs"),n=s("JIr8"),o=s("06WG"),l=s("XNiG"),c=s("fXoL"),u=s("WlVc");let h=(()=>{class e extends i.a{constructor(e,t){super(e),this.httpClient=e,this.loadingOverlay=t,this.findVehicleSource$=new l.a,this.marketListsFetchedSource$=new l.a,this.vehicleDataFetchedSource$=new l.a,this.findVehicle$=this.findVehicleSource$.asObservable(),this.marketListsFetched$=this.marketListsFetchedSource$.asObservable(),this.vehicleDataFetched$=this.vehicleDataFetchedSource$.asObservable()}findVehicle(){this.findVehicleSource$.next()}marketListsFetched(){this.marketListsFetchedSource$.next()}vehicleDataFetched(){this.vehicleDataFetchedSource$.next()}getVehicleLookup(e,t){const s=(new r.e).set("registration",e).set("isThirdParty",String(t));return this.get("adjustment/getVehicleLookup",null,s).pipe(Object(a.a)(e=>this.mapVehicleDetailsResponse(e)),Object(n.a)(o.a.handleJsonResultError()))}getVehicleByManualEntry(e,t,s,i){const l=(new r.e).set("manufacturer",e).set("cc",t).set("doors",s).set("yearofman",i);return this.get("adjustment/manualVehicleLookup",null,l).pipe(Object(a.a)(e=>{if(e.isSuccess)return e.data},Object(n.a)(o.a.handleJsonResultError())))}mapVehicleDetailsResponse(e){return e||e.data?e:null}}return e.\u0275fac=function(t){return new(t||e)(c.bc(r.b),c.bc(u.a))},e.\u0275prov=c.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},NWsL:function(e,t,s){"use strict";s.d(t,"a",function(){return N});var i=s("3Pt+"),r=s("1hA4"),a=s("tkaF"),n=s("XNiG"),o=s("cp0P"),l=s("LRne"),c=s("nYR2"),u=s("1G5W"),h=s("fXoL"),d=s("jhN1"),p=s("Ns8M"),g=s("7Rdm"),m=s("VIHj"),b=s("pyio"),f=s("4CjN"),v=s("WlVc"),y=s("tyNb"),P=s("o3Nk"),k=s("K3ix"),C=s("6d4d"),S=s("z2Vm"),w=s("um90"),I=s("aL6y"),O=s("tXNG"),M=s("ofXK");function j(e,t){if(1&e&&(h.Xb(0,"div",24),h.Sb(1,"input",25),h.Xb(2,"label",26),h.Lc(3),h.Wb(),h.Wb()),2&e){const e=h.ic(2);h.pc("formGroupName",0),h.Ab(3),h.Mc(e.driver.fullName)}}function L(e,t){if(1&e&&(h.Xb(0,"div",27),h.Vb(1,28),h.Sb(2,"input",29),h.Xb(3,"label",30),h.Lc(4),h.Wb(),h.Ub(),h.Wb()),2&e){const e=t.$implicit,s=t.index,i=h.ic(2);h.Ab(1),h.pc("formGroupName",s+1),h.Ab(1),h.pc("id",e.get("guid").value),h.Ab(1),h.pc("for",e.get("guid").value),h.Ab(1),h.Nc(" ",i.getFullName(e.get("forename").value,e.get("surname").value,"Unknown Passenger "+(s+1))," ")}}function R(e,t){if(1&e&&(h.Xb(0,"div"),h.Xb(1,"div",4),h.Xb(2,"div",5),h.Xb(3,"div",18),h.Xb(4,"label",19),h.Lc(5,"Select the names of those injured:"),h.Wb(),h.Xb(6,"div",20),h.Jc(7,j,4,2,"div",21),h.Jc(8,L,5,4,"div",22),h.Wb(),h.Wb(),h.Sb(9,"app-validation-message",23),h.Wb(),h.Wb(),h.Wb()),2&e){const e=h.ic();h.Ab(7),h.pc("ngIf",e.driver),h.Ab(1),h.pc("ngForOf",e.passengers),h.Ab(1),h.pc("control",e.mainForm.get("injured"))}}let N=(()=>{class e{constructor(e,t,s,i,r,a,o,l,c,u,h,d,p,g,m){this.currentWorkflowService=t,this.enolNavigationService=s,this.formBuilder=i,this.formService=r,this.partyPassengersService=a,this.lookupService=o,this.loadingOverlayService=l,this.route=c,this.router=u,this.modalService=h,this.bsModalService=d,this.thirdPartiesService=p,this.incidentDetailsService=g,this.scriptsManagerService=m,this.destroyed$=new n.a,e.setTitle("Accident claim")}get header(){return this.currentWorkflowService.getPageHeaderPrefixWithClaim()}get mainForm(){return this.formGroup}get anyInjuredPerson(){return this.mainForm.get("anyInjuredPerson")}get allInjured(){return this.formGroup.get("injured")}get passengers(){return this.mainForm.get("injured").controls.slice(1)}get partyItemId(){return this.route.snapshot.params.id}ngOnInit(){var e,t,s,i;this.scriptsManagerService.initializeEnol(this.currentWorkflowService.selectedPolicyPublicKey),this.addFormGroup(),this.setValueChanges(),this.loadingOverlayService.show(),Object(o.a)({yesNoMarketList:this.lookupService.marketListLookup$(a.a.YesNo),anyPassengersInjured:this.partyPassengersService.resolve().getAnyPassengersInjured$({id:this.partyItemId}),passengers:this.partyPassengersService.resolve().getCarPassengers$({id:this.partyItemId}),drivers:null!==(t=null===(e=this.incidentDetailsService)||void 0===e?void 0:e.getDrivers$())&&void 0!==t?t:Object(l.a)(null),claimItems:null!==(i=null===(s=this.thirdPartiesService)||void 0===s?void 0:s.getThirdPartiesDetails$())&&void 0!==i?i:Object(l.a)(null)}).pipe(Object(c.a)(()=>{this.loadingOverlayService.close()})).subscribe(e=>{var t,s;if(this.yesNoList=e.yesNoMarketList,this.partyItemId){const t=e.claimItems.data.thirdParties.find(e=>e.guid===this.partyItemId&&e.person);t&&(this.driver={injured:t.injured,fullName:this.getFullName(t.person.forename,t.person.surname,"Unknown Driver")})}else{const i=e.drivers.data.selectedDriverId;let r=null===(t=e.drivers)||void 0===t?void 0:t.data.drivers.find(e=>e.id===i);r||(r=null===(s=e.drivers)||void 0===s?void 0:s.data.drivers[0]),r&&(this.driver={injured:r.injured,fullName:r.fullName})}this.allInjured.push(this.formBuilder.group(Object.assign({},this.driver))),e.passengers.data.passengers.forEach(e=>{this.allInjured.push(this.formBuilder.group(e))}),this.setQuestionContent(),!0===e.anyPassengersInjured.data?this.anyInjuredPerson.setValue("Y"):!1===e.anyPassengersInjured.data&&this.anyInjuredPerson.setValue("N")})}ngOnDestroy(){this.scriptsManagerService.destroy(),this.destroyed$.next(),this.destroyed$.complete()}onSubmit(){var e;if(!this.mainForm.disabled&&!this.formService.validateForm(this.formGroup))return;const t=this.allInjured.enabled?this.passengers.filter(e=>e.get("injured").value).map(e=>e.get("guid").value):[];let s;this.allInjured.enabled?s=null===(e=this.allInjured.at(0).get("injured"))||void 0===e?void 0:e.value:this.mainForm.disabled&&(s=!1),this.loadingOverlayService.show(),this.partyPassengersService.resolve().saveInjuredPassengers$({isDriverInjured:s,passengersGuids:t},{id:this.partyItemId}).pipe(Object(c.a)(()=>{this.loadingOverlayService.close(),this.partyItemId?this.router.navigate(["../third-parties-list",{id:this.partyItemId}],{relativeTo:this.route}):this.enolNavigationService.navigateToNextStep(this.route)})).subscribe()}onBackClick(){this.passengers.length>0?this.router.navigate(["../passengers-summary",this.partyItemId?{id:this.partyItemId}:{}],{relativeTo:this.route}):this.enolNavigationService.navigateToPreviousStep(this.route)}getFullName(e,t,s){const i=[];return e&&i.push(e),t&&i.push(t),0===i.length?s:i.join(" ")}openCancelClaimPopup(){this.modalService.registerModal(()=>(this.modalRef=this.bsModalService.show(r.a,{ignoreBackdropClick:!0}),this.modalRef))}addFormGroup(){this.formGroup=this.formBuilder.group({anyInjuredPerson:[null,i.B.required],injured:this.formBuilder.array([],{validators:T})})}setValueChanges(){this.anyInjuredPerson.valueChanges.pipe(Object(u.a)(this.destroyed$)).subscribe(e=>{"Y"===e?this.allInjured.enable():this.allInjured.disable()})}setQuestionContent(){this.question=this.currentWorkflowService.isFirstParty?"Were you or your passengers injured?":"Was the third party driver or any of their passengers injured?"}}return e.\u0275fac=function(t){return new(t||e)(h.Rb(d.d),h.Rb(p.a),h.Rb(g.a),h.Rb(i.e),h.Rb(m.a),h.Rb(b.a),h.Rb(f.a),h.Rb(v.a),h.Rb(y.a),h.Rb(y.g),h.Rb(P.a),h.Rb(k.b),h.Rb(C.a,8),h.Rb(S.a,8),h.Rb(w.a))},e.\u0275cmp=h.Lb({type:e,selectors:[["app-passengers-injured"]],decls:28,vars:8,consts:[[1,"row","justify-content-center"],[1,"col-md-12","col-lg-10","col-xl-8"],[1,"enol-header"],[3,"formGroup","ngSubmit"],[1,"panel"],[1,"panel-content"],[1,"form-group","position-relative"],[1,"row","m-0","align-items-center","justify-content-between"],["for","anyInjuredPerson",1,"heading-epsilon","form-question","mb-3"],["controlName","anyInjuredPerson",3,"form","valuesCollection"],["requiredMessage","Oops. You forgot to tell us if there were any passengers.",3,"control"],[4,"ngIf"],[1,"d-flex","justify-content-between","align-items-start","align-items-sm-center","mt-sm-3"],[1,"d-flex","flex-column","flex-sm-row"],["type","button",1,"btn","btn-primary","btn-icon","btn-icon-highlight","inverted","mr-0","mr-sm-3","mb-3","mb-sm-0",3,"click"],[1,"icon","icon-functional","icon-arrow"],["type","button",1,"btn","btn-primary",3,"click"],["type","submit",1,"btn","btn-icon","btn-icon-highlight"],[1,"form-group"],[1,"heading-epsilon","form-question","change-question"],["formArrayName","injured",1,"group-validate"],["class","form-check flex-wrap align-items-center mb-3",3,"formGroupName",4,"ngIf"],["class","form-check flex-wrap align-items-center mb-3",4,"ngFor","ngForOf"],["requiredMessage","Please select at least one injured person.",3,"control"],[1,"form-check","flex-wrap","align-items-center","mb-3",3,"formGroupName"],["formControlName","injured","id","driver","type","checkbox",1,"form-check-input"],["for","driver",1,"form-check-label","sessioncamhidetext"],[1,"form-check","flex-wrap","align-items-center","mb-3"],[3,"formGroupName"],["formControlName","injured","type","checkbox",1,"form-check-input",3,"id"],[1,"form-check-label","sessioncamhidetext",3,"for"]],template:function(e,t){1&e&&(h.Xb(0,"div",0),h.Xb(1,"div",1),h.Xb(2,"div",2),h.Xb(3,"h1"),h.Lc(4),h.Wb(),h.Xb(5,"div"),h.Lc(6),h.Wb(),h.Wb(),h.Wb(),h.Xb(7,"div",1),h.Xb(8,"form",3),h.fc("ngSubmit",function(){return t.onSubmit()}),h.Xb(9,"div",4),h.Xb(10,"div",5),h.Xb(11,"div",6),h.Xb(12,"div",7),h.Xb(13,"label",8),h.Lc(14),h.Wb(),h.Wb(),h.Sb(15,"app-radio-buttons-group",9),h.Sb(16,"app-validation-message",10),h.Wb(),h.Wb(),h.Wb(),h.Jc(17,R,10,3,"div",11),h.Xb(18,"div",12),h.Xb(19,"div",13),h.Xb(20,"button",14),h.fc("click",function(){return t.onBackClick()}),h.Sb(21,"span",15),h.Lc(22,"Back "),h.Wb(),h.Xb(23,"button",16),h.fc("click",function(){return t.openCancelClaimPopup()}),h.Lc(24," Cancel claim "),h.Wb(),h.Wb(),h.Xb(25,"button",17),h.Lc(26," Confirm "),h.Sb(27,"span",15),h.Wb(),h.Wb(),h.Wb(),h.Wb(),h.Wb()),2&e&&(h.Ab(4),h.Mc(t.header),h.Ab(2),h.Nc(" Claim number: ",t.currentWorkflowService.claimNumber," "),h.Ab(2),h.pc("formGroup",t.mainForm),h.Ab(6),h.Nc(" ",t.question," "),h.Ab(1),h.pc("form",t.mainForm)("valuesCollection",t.yesNoList),h.Ab(1),h.pc("control",t.anyInjuredPerson),h.Ab(1),h.pc("ngIf","Y"===t.anyInjuredPerson.value))},directives:[i.C,i.s,i.j,I.a,O.a,M.p,i.d,M.o,i.k,i.a,i.r,i.h],styles:[""]}),e})();function T(e){return e.controls.some(e=>{var t;return null===(t=e.get("injured"))||void 0===t?void 0:t.value})?null:{required:!0}}},RCo3:function(e,t,s){"use strict";s.d(t,"a",function(){return i.a});var i=s("w1Kl")},T8ka:function(e,t,s){"use strict";s.d(t,"a",function(){return k});var i=s("fXoL"),r=s("rZBt"),a=s("9v4u"),n=s("tozd"),o=s("SxV6"),l=s("7L9K"),c=s("ZF+8"),u=s("VIHj"),h=s("ofXK");const d=["map"],p=["search"],g=["results"],m=function(e){return{"suggest-selected":e}};function b(e,t){if(1&e){const e=i.Yb();i.Xb(0,"div",13),i.Xb(1,"div",14),i.fc("click",function(){i.Ec(e);const s=t.$implicit;return i.ic(4).selectPlace(s)}),i.Sb(2,"img",15),i.Xb(3,"span",16),i.Lc(4),i.Wb(),i.Wb(),i.Wb()}if(2&e){const e=t.$implicit,s=i.ic(4);i.pc("ngClass",i.uc(2,m,s.selectedPlace===e)),i.Ab(4),i.Nc(" ",e.address," ")}}function f(e,t){if(1&e&&(i.Xb(0,"div"),i.Jc(1,b,5,4,"div",12),i.Wb()),2&e){const e=i.ic(3);i.Ab(1),i.pc("ngForOf",e.places)}}function v(e,t){1&e&&(i.Xb(0,"div"),i.Xb(1,"div",17),i.Lc(2,"No results found"),i.Wb(),i.Wb())}function y(e,t){if(1&e&&(i.Xb(0,"div",10),i.Jc(1,f,2,1,"div",11),i.Jc(2,v,3,0,"div",11),i.Wb()),2&e){const e=i.ic(2);i.Ab(1),i.pc("ngIf",e.places.length>0),i.Ab(1),i.pc("ngIf",0===e.places.length)}}function P(e,t){if(1&e&&(i.Xb(0,"div",4,5),i.Xb(2,"div",6),i.Sb(3,"input",7,8),i.Wb(),i.Jc(5,y,3,2,"div",9),i.Wb()),2&e){const e=i.ic();i.Ab(5),i.pc("ngIf",e.placesResultsVisible&&e.places)}}let k=(()=>{class e{constructor(e,t,s,a){this.dynamicScriptLoaderService=e,this.lookupService=t,this.formService=s,this.ngZone=a,this.defaultLat=r.a.settings.map.defaultLat,this.defaultLng=r.a.settings.map.defaultLng,this.defaultZoom=r.a.settings.map.defaultZoom,this.markers=[],this.readonly=!1,this.locationChange=new i.n,this.markerClick=new i.n,this.placesResultsVisible=!1,this.isLoading=!1,this.isReadonly=!1,this.placesCache={},this.placesMarkers=[],this.placesMarkersListeners=[],this.maxDefaultZoom=16,this.centerMapTimeout=5e3}ngAfterViewInit(){this.formService&&(this.isReadonly=this.formService.isReadonly),this.loadScript()}clickOut(e){this.resultsRef&&this.placesResultsVisible&&this.resultsRef.nativeElement&&(this.resultsRef.nativeElement.contains(e.target)||(this.placesResultsVisible=!1))}ngOnDestroy(){clearTimeout(this.centerMapTimeoutId)}ngOnChanges(e){if(this.hasGoogleMapsBeenLoaded()&&(e.markerPosition&&e.markerPosition.currentValue&&e.markerPosition.currentValue.lat&&e.markerPosition.currentValue.lng&&this.marker&&(this.setMarkerPosition(e.markerPosition.currentValue.lat,e.markerPosition.currentValue.lng,!1),this.panToMarker()),e.readonly&&(this.isReadonly=this.isReadonly&&e.readonly.currentValue),e.markers&&e.markers.currentValue&&this.initializePlacesMarkers(e.markers.currentValue),e.directionOptions&&e.directionOptions.currentValue)){const t=e.directionOptions.currentValue;e.directionOptions.currentValue&&this.drawDirection(t.startMarker,t.endMarker)}}search(){if(this.recentSearchPhrase!==this.searchPhrase){if(this.recentSearchPhrase=this.searchPhrase,this.placesCache[this.searchPhrase])return this.placesResultsVisible=!0,void(this.places=this.placesCache[this.searchPhrase]);this.isLoading=!0,this.lookupService.getPlaces(this.searchPhrase).subscribe(e=>{e.isSuccess?(this.places=e.data,this.placesCache[this.searchPhrase]=e.data):(this.places=[],this.placesCache[this.searchPhrase]=[]),this.isLoading=!1,this.placesResultsVisible=!0})}else this.placesResultsVisible=!0}showPlacesResults(){this.places&&(this.placesResultsVisible=!0)}selectPlace(e){this.isReadonly||(this.setMarkerPosition(e.latitude,e.longitude),this.panToMarker(),this.selectedPlace=e,this.placesResultsVisible=!1)}addEventsToMap(){this.isReadonly||(this.map.addListener("click",e=>{this.marker||this.initializeMarker(),this.shouldCenterMap=!0,this.marker.setPosition(e.latLng),this.marker.setMap(this.map),this.emitLocationChanged(e.latLng.lat(),e.latLng.lng())}),this.map.addListener("center_changed",()=>{this.shouldCenterMap=!0}),this.map.addListener("mouseout",()=>{this.centerMapTimeoutId=window.setTimeout(()=>{this.marker&&this.marker.getPosition()&&this.shouldCenterMap&&(this.panToMarker(),this.shouldCenterMap=!1)},this.centerMapTimeout)}),this.map.addListener("mouseover",()=>{clearTimeout(this.centerMapTimeoutId)}))}loadScript(){this.dynamicScriptLoaderService.loadGoogleScript(a.a.GoogleMaps).pipe(Object(o.a)()).subscribe(e=>{if(!e.loaded)return;const t={center:new google.maps.LatLng(this.defaultLat,this.defaultLng),mapTypeControlOptions:{mapTypeIds:[]},fullscreenControl:!1,streetViewControl:!1,zoom:this.defaultZoom,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]};this.setDefaultMapCenterPosition(t),this.map=new google.maps.Map(this.mapElement.nativeElement,t),this.initializeGeocoder();const s=new google.maps.places.Autocomplete(this.searchElementRef.nativeElement);s.addListener("place_changed",()=>{this.ngZone.run(()=>{const e=s.getPlace();null!=e.geometry&&(this.setMarkerPosition(e.geometry.location.lat(),e.geometry.location.lng()),this.panToMarker())})}),this.initializeMarker(),this.addEventsToMap(),this.initializePlacesMarkers(this.markers)})}drawDirection(e,t){if(this.clearDrawnDirection(),!e||!t)return;const s=new google.maps.DirectionsService;this.directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:!0}),this.directionsDisplay.setMap(this.map);const i=new google.maps.LatLng(e.latitude,e.longitude),r=new google.maps.LatLng(t.latitude,t.longitude),a=new google.maps.LatLngBounds;a.extend(i),a.extend(r),this.map.fitBounds(a);const n={origin:i,destination:r,travelMode:google.maps.TravelMode.DRIVING};s.route(n,(e,t)=>{t===google.maps.DirectionsStatus.OK&&(this.directionsDisplay.setDirections(e),this.directionsDisplay.setMap(this.map))})}initializeMarker(){this.marker=new google.maps.Marker,this.marker.setClickable(!0),this.marker.setMap(this.map),this.marker.setIcon("/assets/images/svg/marker-purple.svg"),this.marker.addListener("click",()=>{this.marker.setMap(null),this.marker=null,this.emitLocationChanged(null,null)}),this.markerPosition?this.setMarkerPosition(this.markerPosition.lat,this.markerPosition.lng,!1):navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{this.setMarkerPosition(e.coords.latitude,e.coords.longitude),this.panToMarker()})}initializePlacesMarkers(e){this.clearMap(),this.initializeGeocoder();for(const t of e)if(0===t.latitude&&0===t.longitude)this.geocoder.geocode({address:t.address},(s,i)=>{if(i===google.maps.GeocoderStatus.OK&&s[0]){t.latitude=s[0].geometry.location.lat(),t.longitude=s[0].geometry.location.lng();const i=this.createMarker(t);this.placesMarkers.push(i),e.length>0&&this.centerMapToAllPlacesMarkers()}});else{const e=this.createMarker(t);this.placesMarkers.push(e)}e.length>0&&this.centerMapToAllPlacesMarkers()}createMarker(e){const t=new google.maps.Marker({clickable:!0}),s=this.getMarkerIcon(e.icon);s&&t.setIcon(s),t.setPosition(new google.maps.LatLng(e.latitude,e.longitude)),t.setMap(this.map);const i=t.addListener("click",()=>{this.markerClick.next(e)});return this.placesMarkersListeners.push(i),t}getMarkerIcon(e){switch(e){case n.a.None:return null;case n.a.CarLocationPin:return"/assets/images/icons/map/location-pin.png";case n.a.BronzeRepairerPin:return"/assets/images/icons/map/bronze-repairer-pin.png";case n.a.SilverRepairerPin:return"/assets/images/icons/map/silver-repairer-pin.png";case n.a.GoldRepairerPin:return"/assets/images/icons/map/gold-repairer-pin.png"}}setMarkerPosition(e,t,s=!0){this.marker.setPosition(new google.maps.LatLng(e,t)),s&&this.emitLocationChanged(e,t)}emitLocationChanged(e,t){this.locationChange.emit({lat:e,lng:t})}panToMarker(){this.map.panTo(this.marker.getPosition()),this.map.setZoom(this.maxDefaultZoom)}setDefaultMapCenterPosition(e){this.markerPosition&&(e.center=new google.maps.LatLng(this.markerPosition.lat?this.markerPosition.lat:this.defaultLat,this.markerPosition.lng?this.markerPosition.lng:this.defaultLng),e.zoom=this.maxDefaultZoom)}centerMapToAllPlacesMarkers(){let e=-90,t=180,s=90,i=-180;for(const o of this.placesMarkers){const r=o.getPosition(),a=r.lat(),n=r.lng();a>e&&(e=a),n<t&&(t=n),a<s&&(s=a),n>i&&(i=n)}const r=new google.maps.LatLng(e,t),a=new google.maps.LatLng(s,i),n=new google.maps.LatLngBounds;n.extend(r),n.extend(a),this.map.fitBounds(n)}initializeGeocoder(){this.geocoder||(this.geocoder=new google.maps.Geocoder)}hasGoogleMapsBeenLoaded(){return null!=this.map}clearDrawnDirection(){this.directionsDisplay&&(this.directionsDisplay.unbindAll(),this.directionsDisplay.setMap(null))}clearMarkers(){for(const e of this.placesMarkers)e.unbindAll(),e.setMap(null);for(const e of this.placesMarkersListeners)e.remove();this.placesMarkers=[],this.placesMarkersListeners=[]}clearMap(){this.clearDrawnDirection(),this.clearMarkers()}}return e.\u0275fac=function(t){return new(t||e)(i.Rb(l.b),i.Rb(c.d),i.Rb(u.a,8),i.Rb(i.A))},e.\u0275cmp=i.Lb({type:e,selectors:[["app-map"]],viewQuery:function(e,t){if(1&e&&(i.Sc(d,1),i.Sc(p,1),i.Sc(g,1)),2&e){let e;i.zc(e=i.gc())&&(t.mapElement=e.first),i.zc(e=i.gc())&&(t.searchElementRef=e.first),i.zc(e=i.gc())&&(t.resultsRef=e.first)}},hostBindings:function(e,t){1&e&&i.fc("click",function(e){return t.clickOut(e)},!1,i.Cc)},inputs:{defaultLat:"defaultLat",defaultLng:"defaultLng",defaultZoom:"defaultZoom",markerPosition:"markerPosition",markers:"markers",directionOptions:"directionOptions",readonly:"readonly"},outputs:{locationChange:"locationChange",markerClick:"markerClick"},features:[i.yb],decls:4,vars:1,consts:[[1,"map-wrapper"],["id","map",1,"map"],["map",""],["class","map-search",4,"ngIf"],[1,"map-search"],["results",""],[1,"input-group"],["id","search","type","text","placeholder","Search address",1,"form-control"],["search",""],["class","mb-3 suggest-results",4,"ngIf"],[1,"mb-3","suggest-results"],[4,"ngIf"],["class","suggest",3,"ngClass",4,"ngFor","ngForOf"],[1,"suggest",3,"ngClass"],[1,"d-flex","align-items-center",3,"click"],["src","../../../../../assets/images/svg/marker-purple.svg",1,"suggest-icon"],[1,"suggest-query"],[1,"suggest","pl-3"]],template:function(e,t){1&e&&(i.Xb(0,"div",0),i.Sb(1,"div",1,2),i.Jc(3,P,6,1,"div",3),i.Wb()),2&e&&(i.Ab(3),i.pc("ngIf",!t.isReadonly))},directives:[h.p,h.o,h.n],styles:[".map[_ngcontent-%COMP%]{left:0;position:absolute;top:0}.map[_ngcontent-%COMP%], .map-wrapper[_ngcontent-%COMP%]{height:100%;width:100%}.map-wrapper[_ngcontent-%COMP%]{display:block;min-height:20rem;overflow:hidden;position:relative}.map-search[_ngcontent-%COMP%]{position:absolute;left:.5em;top:.5em;width:50%;height:100%;pointer-events:none}.map-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{pointer-events:all}.map-search-button[_ngcontent-%COMP%]{background:#fff;border:1px solid #008162;pointer-events:all}.map-search-button-icon[_ngcontent-%COMP%]{width:16px;height:16px}.suggest[_ngcontent-%COMP%]{border:none;position:relative;color:#46154d;font-size:.8rem;line-height:24px;min-height:24px;padding-top:6px;padding-bottom:7px;cursor:pointer;direction:ltr;text-align:left}.suggest[_ngcontent-%COMP%]:hover{color:#46154d;background:#d0d0ce}.suggest-icon[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin-left:8px;margin-right:8px}.suggest-query[_ngcontent-%COMP%]{font-size:13px}.suggest-selected[_ngcontent-%COMP%]{background:#e7131a;color:#fff}.suggest-selected[_ngcontent-%COMP%] > .suggest-icon[_ngcontent-%COMP%]{color:#fff}.suggest-results[_ngcontent-%COMP%]{background:#fff;width:100%;max-height:80%;overflow-y:auto;border:1px solid #008162;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;pointer-events:all}"]}),e})()},TwVa:function(e,t,s){"use strict";s.d(t,"a",function(){return i.a});var i=s("Mllf")},UX6N:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var i=function(e){return e[e.OutstandingBalanceGeneral=0]="OutstandingBalanceGeneral",e[e.OutstandingBalancePaymentInCycle=1]="OutstandingBalancePaymentInCycle",e[e.OutstandingBalanceOpenClaim=2]="OutstandingBalanceOpenClaim",e[e.OutstandingBalanceFaultClaim=3]="OutstandingBalanceFaultClaim",e[e.NoBalanceDueGeneral=4]="NoBalanceDueGeneral",e[e.NoBalanceDueOpenClaim=5]="NoBalanceDueOpenClaim",e[e.NoBalanceFaultClaim=6]="NoBalanceFaultClaim",e[e.RefundGeneral=7]="RefundGeneral",e[e.RefundPaymentInCycle=8]="RefundPaymentInCycle",e}({})},XiB4:function(e,t,s){"use strict";s.d(t,"a",function(){return i}),s.d(t,"b",function(){return r});var i=function(e){return e[e.Valid=0]="Valid",e[e.NotQuoted=1]="NotQuoted",e[e.Expired=2]="Expired",e}({}),r=function(e){return e[e.NotQuoted=0]="NotQuoted",e[e.Quoted=1]="Quoted",e[e.Referred=2]="Referred",e[e.Declined=3]="Declined",e[e.Expired=4]="Expired",e}({})},fHT1:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var i=function(e){return e[e.Active=0]="Active",e[e.Inactive=1]="Inactive",e[e.StartingSoon=2]="StartingSoon",e}({})},fczk:function(e,t,s){"use strict";s.d(t,"a",function(){return S});var i=s("yCtX"),r=s("DH7j"),a=s("7o/Q"),n=s("Lhse"),o=s("zx2A");function l(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),Object(i.a)(e,void 0).lift(new c(t))}class c{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new u(e,this.resultSelector))}}class u extends a.a{constructor(e,t,s=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;Object(r.a)(e)?t.push(new d(e)):t.push("function"==typeof e[n.a]?new h(e[n.a]()):new p(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let s=0;s<t;s++){let t=e[s];t.stillUnsubscribed?this.destination.add(t.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,s=this.destination;for(let a=0;a<t;a++){let t=e[a];if("function"==typeof t.hasValue&&!t.hasValue())return}let i=!1;const r=[];for(let a=0;a<t;a++){let t=e[a],n=t.next();if(t.hasCompleted()&&(i=!0),n.done)return void s.complete();r.push(n.value)}this.resultSelector?this._tryresultSelector(r):s.next(r),i&&s.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(s){return void this.destination.error(s)}this.destination.next(t)}}class h{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class d{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[n.a](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class p extends o.b{constructor(e,t,s){super(e),this.parent=t,this.observable=s,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[n.a](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return Object(o.c)(this.observable,new o.a(this))}}var g=s("fXoL"),m=s("g6Pp"),b=s("tyNb"),f=s("WlVc"),v=s("x845"),y=s("ofXK"),P=s("3Pt+");function k(e,t){if(1&e&&(g.Xb(0,"option",6),g.Lc(1),g.Wb()),2&e){const e=t.$implicit;g.qc("value",e.key),g.Ab(1),g.Nc(" ",e.value," ")}}function C(e,t){if(1&e){const e=g.Yb();g.Xb(0,"div",1),g.Xb(1,"p",2),g.Lc(2),g.Wb(),g.Xb(3,"div",3),g.Xb(4,"select",4),g.fc("change",function(t){return g.Ec(e),g.ic().onChange(t.target.value)})("ngModelChange",function(t){return g.Ec(e),g.ic().selectedPolicyId=t}),g.Jc(5,k,2,2,"option",5),g.Wb(),g.Wb(),g.Wb()}if(2&e){const e=g.ic();g.Ab(1),g.pc("ngClass",e.headerClass),g.Ab(1),g.Nc("",e.selectPolicyMessage,":"),g.Ab(2),g.pc("ngModel",e.selectedPolicyId),g.Ab(1),g.pc("ngForOf",e.listOfPolicies)}}let S=(()=>{class e{constructor(e,t,s,i,r){this.policyService=e,this.route=t,this.router=s,this.loadingOverlay=i,this.policyMessagesService=r,this.showContent=!1,this.inactivePoliciesAvailable=!0,this.headerClass="heading-delta",this.hideForSinglePolicy=!1}ngOnInit(){this.loadingOverlay.show(),this.inactivePoliciesAvailable?l(this.route.queryParams,this.policyService.getSelectListOfPolicies$()).subscribe(([e,t])=>{this.initializeListOfPolicies(e,t),this.loadingOverlay.close()}):l(this.route.queryParams,this.policyService.getSelectListOfActivePolicies$()).subscribe(([e,t])=>{this.initializeListOfPolicies(e,t),this.loadingOverlay.close()}),this.selectPolicyMessage||(this.selectPolicyMessage="Select the policy you wish to view")}onChange(e){this.setPolicyIdParam(e)}initializeListOfPolicies(e,t){if(t&&t.length>0){const s=e.policyId?decodeURIComponent(e.policyId):e.policyId;this.listOfPolicies=t.map(e=>(e.key=decodeURIComponent(e.key),e)),this.showContent=!this.hideForSinglePolicy||this.listOfPolicies.length>1,this.selectedPolicyId=null!=s?s:this.listOfPolicies[0].key,this.setPolicyIdParam(this.selectedPolicyId)}}setPolicyIdParam(e){this.loadingOverlay.show(),this.policyService.policyMessages$(e).subscribe(e=>{e&&this.policyMessagesService.setPolicyMessages(e.messages,e.policyChangesLocked,e.policyChangesLockedDueToRenewal,e.customerCantMakeChangesAfterCFSLock,e.renewalChangesLocked),this.loadingOverlay.close()}),this.router.navigate([],{replaceUrl:!0,queryParamsHandling:"merge",preserveFragment:!0,queryParams:{policyId:e}})}}return e.\u0275fac=function(t){return new(t||e)(g.Rb(m.a),g.Rb(b.a),g.Rb(b.g),g.Rb(f.a),g.Rb(v.a))},e.\u0275cmp=g.Lb({type:e,selectors:[["app-policies-select-list"]],inputs:{selectPolicyMessage:"selectPolicyMessage",inactivePoliciesAvailable:"inactivePoliciesAvailable",headerClass:"headerClass",hideForSinglePolicy:"hideForSinglePolicy"},decls:1,vars:1,consts:[["class","policy-select form-group row align-items-center justify-content-between position-relative mb-2 mb-md-3",4,"ngIf"],[1,"policy-select","form-group","row","align-items-center","justify-content-between","position-relative","mb-2","mb-md-3"],[1,"col-12","col-xl-auto",3,"ngClass"],[1,"select-container","col-12","col-xl-auto","m-0","flex-ie-grow"],[1,"dropdown-menu","mt-2","mt-xl-0",3,"ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&g.Jc(0,C,6,4,"div",0),2&e&&g.pc("ngIf",t.showContent)},directives:[y.p,y.n,P.A,P.r,P.u,y.o,P.v,P.D],styles:[".policy-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}@media screen and (min-width:1200px){.policy-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{max-width:16.75rem;font-size:.95rem;line-height:1.25rem}}"]}),e})()},m0jW:function(e,t,s){"use strict";s.d(t,"a",function(){return n});var i=s("fXoL"),r=s("3Pt+");const a={provide:r.p,useExisting:Object(i.T)(()=>n),multi:!0};let n=(()=>{class e extends r.b{constructor(e,t){super(e,t,!1),this.renderer=e,this.elementRef=t,this.decimals=0,this.allowAllNumberComibations=!1,this.isDisabled=!1}writeValue(e){this.currentValue=e,super.writeValue(this.currentValue),this.onChange(this.currentValue)}onInput(e){(this.isDisabled||""===e||this.checkValue(e))&&(this.currentValue=e),super.writeValue(this.currentValue),this.onChange(this.currentValue)}setDisabledState(e){this.renderer.setProperty(this.elementRef.nativeElement,"disabled",e),this.isDisabled=e}checkValue(e){let t="^(?:0|[1-9][0-9]*)";return this.allowAllNumberComibations?(t="^\\d+$",new RegExp(t).test(e)):(t+=this.decimals<=0?"$":"(?:\\.[0-9]{0,"+this.decimals+"})?$",new RegExp(t).test(e))}}return e.\u0275fac=function(t){return new(t||e)(i.Rb(i.E),i.Rb(i.l))},e.\u0275dir=i.Mb({type:e,selectors:[["","appNumericOnly",""]],hostBindings:function(e,t){1&e&&i.fc("input",function(e){return t.onInput(e.target.value)})("blur",function(){return t.onTouched()})},inputs:{decimals:"decimals",allowAllNumberComibations:"allowAllNumberComibations"},features:[i.zb([a]),i.xb]}),e})()},nfRA:function(e,t,s){"use strict";s.d(t,"a",function(){return l});var i=s("ROHl"),r=s("tk/3"),a=s("JIr8"),n=s("06WG"),o=s("fXoL");let l=(()=>{class e extends i.a{constructor(e){super(e),this.httpClient=e}login(e){return this.post("outstandingpayment/arrearslogin",e).pipe(Object(a.a)(n.a.handleJsonResultError("sign in")))}payArrears(e){return this.post("outstandingpayment/payarrears",null,null,(new r.e).set("policyId",e)).pipe(Object(a.a)(n.a.handleJsonResultError("sign in")))}}return e.\u0275fac=function(t){return new(t||e)(o.bc(r.b))},e.\u0275prov=o.Nb({token:e,factory:e.\u0275fac}),e})()},qefd:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var i=s("fXoL"),r=s("3Pt+");let a=(()=>{class e{constructor(e,t,s){this.el=e,this.renderer=t,this.ngControl=s,this.isDisabled=!1,this.propagateChange=e=>{},this.onTouched=()=>{},s.valueAccessor=this}get active(){return this.ngControl.value===this.innerValue}handleClick(){this.value=this.unselectable&&this.active?null:this.innerValue,this.propagateChange(this.value)}writeValue(e){e&&(this.value=e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.renderer.setProperty(this.el.nativeElement,"disabled",e),this.isDisabled=e}}return e.\u0275fac=function(t){return new(t||e)(i.Rb(i.l),i.Rb(i.E),i.Rb(r.q))},e.\u0275dir=i.Mb({type:e,selectors:[["","appIconRadioButton",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.fc("click",function(){return t.handleClick()}),2&e&&i.Jb("active",t.active)},inputs:{innerValue:["appIconRadioButton","innerValue"],unselectable:"unselectable"}}),e})()},sYjY:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("fXoL");let r=(()=>{class e{constructor(){}transform(e,t=!1){let s;if(e>3&&e<21)s="th";else switch(e%10){case 1:s="st";break;case 2:s="nd";break;case 3:s="rd";break;default:s="th"}return t&&(s=`<sup>${s}</sup>`),e+s}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Qb({name:"ordinalNumber",type:e,pure:!0}),e})()},tozd:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var i=function(e){return e[e.None=0]="None",e[e.CarLocationPin=1]="CarLocationPin",e[e.BronzeRepairerPin=2]="BronzeRepairerPin",e[e.SilverRepairerPin=3]="SilverRepairerPin",e[e.GoldRepairerPin=4]="GoldRepairerPin",e}({})},w1Kl:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var i=function(e){return e[e.Unknown=0]="Unknown",e[e.BACS=1]="BACS",e[e.Card=2]="Card",e[e.Settlement=4]="Settlement",e[e.TotalLoss=8]="TotalLoss",e}({})},wY0m:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var i=function(e){return e[e.Unknown=0]="Unknown",e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Reopened=3]="Reopened",e[e.Cancelled=4]="Cancelled",e[e.Void=5]="Void",e[e.FNOL=6]="FNOL",e[e.AwaitingConfirmation=7]="AwaitingConfirmation",e}({})},y5FX:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var i=function(e){return e[e.Reason=0]="Reason",e[e.Date=1]="Date",e[e.Breakdown=2]="Breakdown",e[e.Payment=3]="Payment",e[e.Confirmation=4]="Confirmation",e}({})},zPcU:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var i=s("fXoL"),r=s("Ns8M");let a=(()=>{class e{constructor(e){this.currentWorkflowService=e}resolve(e){return this.currentWorkflowService.isFirstParty=e.data.isFirstParty,{isFirstParty:this.currentWorkflowService.isFirstParty}}}return e.\u0275fac=function(t){return new(t||e)(i.bc(r.a))},e.\u0275prov=i.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},zYZC:function(e,t,s){"use strict";s.d(t,"a",function(){return u});var i=s("tk/3"),r=s("JIr8"),a=s("UXun"),n=s("ROHl"),o=s("06WG"),l=function(e){return e.GetMarketList="marketlist/getmarketlist",e.GetOtherList="lookup/marketlist/getotherlist",e.GetTravelVehicleTypes="marketlist/gettravelvehicletypes",e.GetPositionsInVehicle="marketlist/getpositionsinvehicle",e.GetOccupations="marketlist/getoccupations",e.GetEmployersBusinessCategory="marketlist/getemployersbusinesscategory",e}({}),c=s("fXoL");let u=(()=>{class e extends n.a{constructor(e){super(e)}getCircumstances$(){return this.get("enol/marketlist/circumstances").pipe(Object(r.a)(o.a.handleJsonResultError()))}getTheftLocationList$(){return this.get("enol/marketlist/theftLocationList").pipe(Object(r.a)(o.a.handleJsonResultError()))}getListValues$(e){const t=(new i.e).set("listname",e);return this.get(l.GetOtherList,null,t).pipe(Object(a.a)(1))}}return e.\u0275fac=function(t){return new(t||e)(c.bc(i.b))},e.\u0275prov=c.Nb({token:e,factory:e.\u0275fac}),e})()}}]);